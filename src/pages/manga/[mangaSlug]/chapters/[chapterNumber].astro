---
import Layout from "../../../../layouts/Layout.astro";
import { Reader } from "../../../../components/Reader";

const { mangaSlug, chapterNumber } = Astro.params;
const { organization, callAPI } = Astro.locals;

const { status: mangaStatus, data: manga } = await callAPI(
    `/api/manga-custom/${mangaSlug}`,
);

if (!mangaStatus) {
    return Astro.redirect("/404");
}
---

<Layout title={manga.title}>
    <Reader
        organization={organization}
        manga={manga}
        chapterNumber={chapterNumber}
        client:only
    />
</Layout>
