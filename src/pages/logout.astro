---
import Layout from "../layouts/Layout.astro";

Astro.cookies.delete("token");
Astro.cookies.delete("username");
Astro.cookies.delete("user_slug");
console.log('logged out');

---

<Layout title="lat-Manga - Tus mangas en latino">
	<div id="logout"></div>
</Layout>

<script>
    import 'cookie-store';
	async function load() {
		if (!document.querySelector("#logout")) {
			return;
		}
		await Promise.all([
			// @ts-ignore
			cookieStore.delete("token"),
			// @ts-ignore
			cookieStore.delete("username"),
			// @ts-ignore
			cookieStore.delete("user_slug"),
		]);
		window.location.href = "/";
	}
    document.addEventListener('astro:page-load', load, { once: false });
</script>

